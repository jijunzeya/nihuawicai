{"version":3,"sources":["../../src/handler/SocketHandler.js"],"names":["SocketHandler","server","rooms","chatHandlers","io","nsp","of","on","console","log","socket","id","chatHandler","roomId","_user","nickName","func"],"mappings":";;;;;;;;AAGA;AACA;;;AAHA;;;;AAIA;;;;;;;;IACqBA,a;AAIjB,2BAAYC,MAAZ,EAAoB;AAAA;;AAAA;;AAAA,aAHpBC,KAGoB,GAHZ,EAGY;AAAA,aAFpBC,YAEoB,GAFL,EAEK;;AAChB,YAAIC,KAAK,qBAAaH,MAAb,CAAT;AACA,YAAII,MAAMD,GAAGE,EAAH,CAAM,OAAN,CAAV;;AAEA;AACAD,YAAIE,EAAJ,CAAO,YAAP,EAAqB,kBAAU;AAC3BC,oBAAQC,GAAR,CAAY,yBAAyBC,OAAOC,EAA5C;AACA,gBAAIC,cAAc,0BAAgBP,GAAhB,EAAqB,MAAKH,KAA1B,EAAiCQ,MAAjC,EAAyC,UAACG,MAAD,EAAY;AACnE;AACAL,wBAAQC,GAAR,CAAY,gBAAgBI,MAA5B;AACH,aAHiB,EAGf,UAACA,MAAD,EAAY;AACX;AACAL,wBAAQC,GAAR,CAAY,gBAAgBI,MAA5B;AACH,aANiB,CAAlB;AAOA,kBAAKV,YAAL,CAAkBO,OAAOC,EAAzB,IAA+BC,WAA/B;AACAJ,oBAAQC,GAAR,CAAY,oBAAoBG,YAAYE,KAAZ,CAAkBC,QAAlD;AACA;AACAL,mBAAOH,EAAP,CAAU,YAAV,EAAwB,YAAM;AAC1BC,wBAAQC,GAAR,CAAY,2BAA2BC,OAAOC,EAA9C;AACA,uBAAO,MAAKR,YAAL,CAAkBO,OAAOC,EAAzB,CAAP;AACA;AACH,aAJD;AAMH,SAlBD;AAoBH;;;;6BAEKK,I,EAAM,CAEX;;;;;;kBAjCgBhB,a","file":"SocketHandler.js","sourcesContent":["\nimport SocketIO from 'socket.io';\n\n// import User from './beans/User';\n// import Room from './beans/Room';\nimport ChatHandler from './ChatHandler';\nexport default class SocketHandler {\n    rooms = {};\n    chatHandlers = {};\n\n    constructor(server) {\n        let io = new SocketIO(server);\n        let nsp = io.of('/chat');\n\n        // let nsp =io;\n        nsp.on('connection', socket => {\n            console.log('@@##nsp connection :' + socket.id);\n            let chatHandler = new ChatHandler(nsp, this.rooms, socket, (roomId) => {\n                //创建room成功\n                console.log('@@##创建房间成功:' + roomId);\n            }, (roomId) => {\n                // 加入room成功\n                console.log('@@##加入房间成功:' + roomId);\n            });\n            this.chatHandlers[socket.id] = chatHandler;\n            console.log('@@##connection:' + chatHandler._user.nickName);\n            // console.log('@@##connection:' + this.chatHandlers.keys());\n            socket.on('disconnect', () => {\n                console.log('@@##socket disconnect:' + socket.id);\n                delete this.chatHandlers[socket.id];\n                // console.log('@@##disconnect:' + JSON.stringify(this.chatHandlers));\n            })\n\n        });\n\n    }\n\n    init (func) {\n\n    }\n\n}"]}